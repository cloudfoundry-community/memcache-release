---
brokerPassword: <%= p('memcache_broker.broker_password') %>

host:
  local: <%= spec.networks.send(properties.networks.apps).ip %>
  public: memcache-service.<%= p('domain')%>
  port: <%= p('memcache_broker.host.port') %>

pidfile: /var/vcap/sys/run/memcache_broker/memcache_broker.pid

logging:
  level: INFO

nats:
  machines:
<% p("nats.machines").each do |address| %>
  - nats://<%= p("nats.user") %>:<%= p("nats.password") %>@<%= address %>:<%= p("nats.port") %>
<% end %>

memcache:
  srv_url: <%= p('memcache_hazelcast.host.srv_api') %>
  username: <%= p('memcache_hazelcast.host.username') %>
  password: <%= p('memcache_hazelcast.host.password') %>
<% if_p("memcache_broker.memcache.vip") do |vip| %>
  vip: <%= vip %>
<% end %>
  secret_key: <%= p('memcache_hazelcast.memcache.secret_key') %>
  servers:
<% if_p("memcache_broker.memcache.servers") do |servers| %>
<% servers.each do |server| %>
  - <%= server %>
<% end %>
<% end %>

<% if_p("memcache_broker.plans") do |plans| %>
plans:
<% plans.each do |plan_name, plan| %>
  <%= plan_name %>:
  <% plan.each do |plan_key, plan_value| %>
    <%= plan_key %>: <%= plan_value %>
  <% end %>
<% end %>
<% end %>

tomcat:
  base_directory: /var/vcap/sys/run/memcache_broker/tomcat
